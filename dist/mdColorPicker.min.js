!function(e,o,t){"use strict";e.module("mdColorPicker",[]).factory("mdColorPickerHistory",["$injector",function(e){var o=[],r=[],n=!1;try{n=e.get("$cookies")}catch(l){}if(n)for(var a=n.getObject("mdColorPickerHistory")||[],i=0;i<a.length;i++)o.push(t(a[i])),r.push(a[i]);var c=40;return{length:function(){return arguments[0]?void(c=arguments[0]):o.length},add:function(e){for(var t=0;t<o.length;t++)o[t].toRgbString()===e.toRgbString()&&(o.splice(t,1),r.splice(t,1));o.unshift(e),r.unshift(e.toRgbString()),o.length>c&&(o.pop(),r.pop()),n&&n.putObject("mdColorPickerHistory",r)},get:function(){return o},reset:function(){o=[],r=[],n&&n.putObject("mdColorPickerHistory",r)}}}]).directive("mdColorPicker",["$timeout","mdColorPickerHistory",function(e,o){return{templateUrl:"mdColorPicker.tpl.html",scope:{value:"=?",type:"@",label:"@",icon:"@","default":"@",random:"@",openOnInput:"@"},controller:["$scope","$element","$mdDialog",function(r,n,l){var a=!1;r.clearValue=function(){r.value=""},r.showColorPicker=function(n){a||l.show({template:'<md-dialog class="md-color-picker-dialog">	<div md-color-picker-dialog value="value" default="{{default}}" random="{{random}}" ok="ok"></div>	<md-actions layout="row">		<md-button class="md-mini" flex ng-click="close()">Cancel</md-button>		<md-button class="md-mini" flex ng-click="ok()">Select</md-button>	</md-actions></md-dialog>',hasBackdrop:!1,clickOutsideToClose:!1,controller:["$scope","value","defaultValue","random",function(e,o,t,r){e.close=function(){l.cancel()},e.ok=function(){l.hide(e.value)},e.value=o,e["default"]=t,e.random=r,e.hide=e.ok}],locals:{value:r.value,defaultValue:r["default"],random:r.random},targetEvent:n,focusOnOpen:!1,onRemoving:function(){a=!0,e(function(){a=!1},500)}}).then(function(e){r.value=e,o.add(new t(e))},function(){})}}],compile:function(e,o){o.type=void 0!==o.type?o.type:0}}}]).directive("mdColorPickerDialog",["$timeout","mdColorPickerHistory",function(o,r){return{templateUrl:"mdColorPickerDialog.tpl.html",scope:{value:"=?","default":"@",random:"@",ok:"=?"},controller:["$scope","$element","$attrs",function(n,l,a){var i=e.element(l[0].querySelector(".md-color-picker-container")),c=e.element(i[0].querySelector(".md-color-picker-result")),d=(e.element(l[0].querySelector(".md-color-picker-input")),e.element(l[0].querySelector(".md-color-picker-preview-input"))),u=["toHexString","toRgbString","toHslString"];n["default"]=n["default"]?n["default"]:n.random?t.random():"rgb(127, 64, 64)",n.color=new t(n.value||n["default"]),n.alpha=n.color.getAlpha(),n.history=r,n.whichPane=0,n.inputFocus=!1;var s=9,m=(2*Math.PI/s,[t("rgb(255, 0, 0)"),t("rgb(255, 128, 0)"),t("rgb(255, 255, 0)"),t("rgb(0, 255, 0)"),t("rgb(0, 255, 128)"),t("rgb(0, 255, 255)"),t("rgb(0, 128, 255)"),t("rgb(0, 0, 255)"),t("rgb(128, 0, 255)"),t("rgb(255, 0, 255)")]),g=["rgb(255, 255, 255)","rgb(205, 205, 205)","rgb(178, 178, 178)","rgb(153, 153, 153)","rgb(127, 127, 127)","rgb(102, 102, 102)","rgb(76, 76, 76)","rgb(51, 51, 51)","rgb(25, 25, 25)","rgb(0, 0, 0)"];n.palette=[];var p,f,v=[];for(p=-4;4>=p;p++){for(v=[],f=0;f<m.length;f++){var h=new t(m[f].toRgb());0>p&&v.push(h.lighten(Math.abs(10*p)).toRgbString()),0===p&&v.push(m[f].toRgbString()),p>0&&v.push(h.darken(p*(p/5)*10).toRgbString())}n.palette.push(v)}n.palette.push(g),n.previewFocus=function(){n.inputFocus=!0,o(function(){d[0].setSelectionRange(0,d[0].value.length)})},n.previewBlur=function(){n.inputFocus=!1,n.setValue()},n.previewKeyDown=function(e){console.log(e,n.ok),13==e.keyCode&&n.ok&&n.ok()},n.setPaletteColor=function(e){n.color=t(e.currentTarget.style.background)},n.setValue=function(){n.color&&n.color&&u[n.type]&&"rgba(0, 0, 0, 0)"!==n.color.toRgbString()&&(n.value=n.color[u[n.type]]())},n.changeValue=function(){n.color=t(n.value),n.$broadcast("mdColorPicker:colorSet",{color:n.color})},n.$watch("alpha",function(e){n.color.setAlpha(e)}),n.$watch("whichPane",function(e){n.$broadcast("mdColorPicker:colorSet",{color:n.color})}),n.$watch("type",function(){c.removeClass("switch"),o(function(){c.addClass("switch")})}),n.$watchGroup(["color.toRgbString()","type"],function(e){n.inputFocus||n.setValue()}),o(function(){n.$broadcast("mdColorPicker:colorSet",{color:n.color}),d.focus(),n.previewFocus()})}]}}]).directive("mdColorPickerHue",[function(){return{template:'<canvas width="100%" height="100%"></canvas><div class="md-color-picker-marker"></div>',controller:["$scope",function(e){}],link:function(r,n,l){console.log("hue");var a,i=n.children()[0],c=n.children()[1],d=i.getContext("2d"),u=function(e){var o=e.pageX-p.x,t=e.pageY-p.y;return s(o,t)},s=function(e,o){e=Math.max(0,Math.min(e,i.width-1)),o=Math.max(0,Math.min(o,i.height-1));var r=d.getImageData(e,o,1,1).data;m(o);var n=new t({r:r[0],g:r[1],b:r[2]});return n.toHsl().h},m=function(o){e.element(c).css({left:"0"}),e.element(c).css({top:o-c.offsetHeight/2+"px"})},g=function(){a=255,n.css({height:a+"px"}),i.height=a,i.width=50;var e=d.createLinearGradient(90,0,90,a);e.addColorStop(.01,"rgba(255, 0, 0, 1.000)"),e.addColorStop(.167,"rgba(255, 0, 255, 1.000)"),e.addColorStop(.333,"rgba(0, 0, 255, 1.000)"),e.addColorStop(.5,"rgba(0, 255, 255, 1.000)"),e.addColorStop(.666,"rgba(0, 255, 0, 1.000)"),e.addColorStop(.828,"rgba(255, 255, 0, 1.000)"),e.addColorStop(.999,"rgba(255, 0, 0, 1.000)"),d.fillStyle=e,d.fillRect(0,0,i.width,a)},p={x:null,y:null},f=e.element(o);n.on("mousedown",function(e){e.preventDefault(),e.stopImmediatePropagation(),n.css({cursor:"none"}),p.x=i.getBoundingClientRect().left+1,p.y=i.getBoundingClientRect().top;var o=function(e){var o=u(e);r.$broadcast("mdColorPicker:spectrumHueChange",{hue:o})};f.on("mousemove",o),f.one("mouseup",function(e){f.off("mousemove",o),n.css({cursor:"crosshair"})}),o(e)}),r.$on("mdColorPicker:colorSet",function(e,o){var t=r.color.toHsv();m(i.height-i.height*(t.h/360))}),g()}}}]).directive("mdColorPickerAlpha",[function(){return{template:'<canvas width="100%" height="100%"></canvas><div class="md-color-picker-marker"></div>',controller:["$scope",function(e){}],link:function(t,r,n){var l,a=r.children()[0],i=r.children()[1],c=a.getContext("2d"),d=t.color.toRgb(),u=function(e){var o=e.pageX-f.x,t=e.pageY-f.y;return s(o,t)},s=function(e,o){e=Math.max(0,Math.min(e,a.width-1)),o=Math.max(0,Math.min(o,a.height-1));var t=c.getImageData(e,o,1,1).data;return m(o),t[3]/255},m=function(o){e.element(i).css({left:"0"}),e.element(i).css({top:o-i.offsetHeight/2+"px"})},g=function(e){t.color.setAlpha(e),t.alpha=e,t.$apply()},p=function(){l=255,r.css({height:l+"px"}),a.height=l,a.width=l;var e=c.createLinearGradient(90,0,90,l);e.addColorStop(.01,"rgba("+d.r+","+d.g+","+d.b+", 1.000)"),e.addColorStop(.999,"rgba("+d.r+","+d.g+","+d.b+", 0.000)"),c.fillStyle=e,c.fillRect(0,0,a.width,l)},f={x:null,y:null},v=e.element(o);r.on("mousedown",function(e){e.preventDefault(),e.stopImmediatePropagation(),r.css({cursor:"none"}),f.x=a.getBoundingClientRect().left+1,f.y=a.getBoundingClientRect().top;var o=function(e){var o=u(e);g(o)};v.on("mousemove",o),v.one("mouseup",function(e){v.off("mousemove",o),r.css({cursor:"crosshair"})}),o(e)}),t.$on("mdColorPicker:spectrumColorChange",function(e,o){d=o.color,p()}),t.$on("mdColorPicker:colorSet",function(e,o){d=o.color.toRgb(),p();var t=o.color.getAlpha(),r=a.height-a.height*t;m(r)}),p()}}}]).directive("mdColorPickerSpectrum",[function(){return{template:'<canvas width="100%" height="100%"></canvas><div class="md-color-picker-marker"></div>{{hue}}',controller:["$scope",function(e){}],link:function(t,r,n){var l=255;r.css({height:l+"px"});var a=r.children()[0];a.height=l,a.width=l;var i=r.children()[1],c=a.getContext("2d"),d=t.color.toHsl().h,u=function(e){var o=e.pageX-v.x,t=e.pageY-v.y;return s(o,t)},s=function(e,o,t){void 0===t&&(t=!0),e=Math.max(0,Math.min(e,a.width-1)),o=Math.max(0,Math.min(o,a.height-1)),m(e,o);var r=c.getImageData(e,o,1,1).data;return{r:r[0],g:r[1],b:r[2]}},m=function(o,t){e.element(i).css({left:o-i.offsetWidth/2+"px"}),e.element(i).css({top:t-i.offsetHeight/2+"px"})},g=function(){var e={x:i.offsetLeft+Math.floor(i.offsetWidth/2),y:i.offsetTop+Math.floor(i.offsetHeight/2)};return e},p=function(){c.clearRect(0,0,a.width,a.height);var e=c.createLinearGradient(0,0,a.width,0);e.addColorStop(0,"rgba(255, 255, 255, 1.000)"),e.addColorStop(1,"rgba(255, 255, 255, 0.000)");var o=c.createLinearGradient(0,0,0,a.height);o.addColorStop(0,"rgba(0, 0, 0, 0.000)"),o.addColorStop(1,"rgba(0, 0, 0, 1.000)"),c.fillStyle="hsl( "+d+", 100%, 50%)",c.fillRect(0,0,a.width,a.height),c.fillStyle=e,c.fillRect(0,0,a.width,a.height),c.fillStyle=o,c.fillRect(0,0,a.width,a.height)},f=function(e){t.color._r=e.r,t.color._g=e.g,t.color._b=e.b,t.$apply(),t.$broadcast("mdColorPicker:spectrumColorChange",{color:e})},v={x:null,y:null},h=e.element(o);r.on("mousedown",function(e){e.preventDefault(),e.stopImmediatePropagation(),r.css({cursor:"none"}),v.x=a.getBoundingClientRect().left+1,v.y=a.getBoundingClientRect().top;var o=function(e){var o=u(e);f(o)};h.on("mousemove",o),h.one("mouseup",function(e){h.off("mousemove",o),r.css({cursor:"crosshair"})}),o(e)}),t.$on("mdColorPicker:spectrumHueChange",function(e,o){d=o.hue,p();var t=g(),r=s(t.x,t.y);f(r)}),t.$on("mdColorPicker:colorSet",function(e,o){var t=o.color.toHsv();d=t.h,p();var r=a.width*t.s,n=a.height-a.height*t.v;m(r,n)}),p()}}}]).factory("$mdColorPicker",["$q","$mdDialog","mdColorPickerHistory",function(e,o,r){return{show:function(n){var l=e.defer();return void 0===n&&(n={}),void 0===n.hasBackdrop&&(n.hasBackdrop=!0),void 0===n.clickOutsideToClose&&(n.clickOutsideToClose=!0),void 0===n.defaultValue&&(n.defaultValue="#FFFFFF"),void 0===n.focusOnOpen&&(n.focusOnOpen=!1),o.show({template:'<md-dialog class="md-color-picker-dialog">	<div md-color-picker-dialog value="value" default="{{default}}" random="{{random}}" ok="ok"></div>	<md-actions layout="row">		<md-button class="md-mini" flex ng-click="close()">Cancel</md-button>		<md-button class="md-mini" flex ng-click="ok()">Select</md-button>	</md-actions></md-dialog>',hasBackdrop:n.hasBackdrop,clickOutsideToClose:n.clickOutsideToClose,controller:["$scope","value","defaultValue","random",function(e,r,n,l){e.close=function(){o.cancel()},e.ok=function(){var r=new t(e.value),n={selectedValue:e.value,hsv:r.toHslString(),hex:r.toHexString(),hex8:r.toHex8String(),rgb:r.toRgbString(),percentageRgb:r.toPercentageRgbString()};o.hide(n)},e.value=r,e["default"]=n,e.random=l,e.hide=e.ok}],locals:{value:n.value,defaultValue:n["default"],random:n.random},targetEvent:n.$event,focusOnOpen:n.focusOnOpen}).then(function(e){var o={value:e};r.add(new t(e)),l.resolve(o)},function(){}),l.promise}}}]),e.module("mdColorPicker").run(["$templateCache",function(e){e.put("mdColorPicker.tpl.html",'<div class="md-color-picker-input-container" layout="row">\r\n	<div class="md-color-picker-preview md-color-picker-checkered-bg" ng-click="showColorPicker()">\r\n		<div class="md-color-picker-result" ng-style="{background: value}"></div>\r\n	</div>\r\n	<md-input-container flex>\r\n		<label><md-icon ng-if="icon">{{icon}}</md-icon>{{label}}</label>\r\n		<input type="input" ng-model="value" class=\'md-color-picker-input\'  ng-mousedown="openOnInput && showColorPicker($mdOpenMenu, $event)"/>\r\n	</md-input-container>\r\n	<md-button class="md-icon-button md-color-picker-clear" ng-if="value" ng-click="clearValue();" aria-label="Clear Color">\r\n		<md-icon>clear</md-icon>\r\n	</md-button>\r\n</div>\r\n'),e.put("mdColorPickerDialog.tpl.html",'<div class="md-color-picker-container in" layout="column">\r\n	<div class="md-color-picker-arrow" ng-style="{\'border-bottom-color\': color.toRgbString() }"></div>\r\n\r\n	<div class="md-color-picker-preview md-color-picker-checkered-bg"  ng-class="{\'dark\': !color.isDark() || color.getAlpha() < .45}" flex="1" layout="column">\r\n\r\n		<div class="md-color-picker-result" ng-style="{\'background\': color.toRgbString()}" flex="100" layout="column" layout-fill layout-align="center center" ng-click="focusPreviewInput( $event )">\r\n			<!--<span flex  layout="column" layout-align="center center">{{value}}</span>-->\r\n			<div flex  layout="row" layout-align="center center">\r\n				<input class="md-color-picker-preview-input" type="text" ng-model="value" ng-focus="previewFocus($event);" ng-blur="previewBlur()" ng-change="changeValue()" ng-keypress="previewKeyDown($event)" layout-fill />\r\n			</div>\r\n			<div class="md-color-picker-tabs" style="width: 100%">\r\n				<md-tabs md-selected="type" md-stretch-tabs="always" md-no-bar md-no-ink md-no-pagination="true" >\r\n					<md-tab label="Hex" ng-disabled="color.getAlpha() !== 1" md-ink-ripple="#ffffff"></md-tab>\r\n					<md-tab label="RGB"></md-tab>\r\n					<md-tab label="HSL"></md-tab>\r\n					<!--<md-tab label="HSV"></md-tab>\r\n					<md-tab label="VEC"></md-tab>-->\r\n				</md-tabs>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="md-color-picker-tabs md-color-picker-colors">\r\n		<md-tabs md-stretch-tabs="always" md-align-tabs="bottom"  md-selected="whichPane">\r\n			<md-tab>\r\n				<md-tab-label>\r\n					<md-icon>gradient</md-icon>\r\n				</md-tab-label>\r\n				<md-tab-body>\r\n					<div layout="row" layout-align="space-between" style="height: 255px">\r\n						<div md-color-picker-spectrum></div>\r\n						<div md-color-picker-hue></div>\r\n						<div md-color-picker-alpha class="md-color-picker-checkered-bg"></div>\r\n					</div>\r\n				</md-tab-body>\r\n			</md-tab>\r\n			<md-tab>\r\n				<md-tab-label>\r\n					<md-icon>tune</md-icon>\r\n				</md-tab-label>\r\n				<md-tab-body>\r\n					<div layout="column" flex="100" layout-fill layout-align="space-between start center" class="md-color-picker-sliders">\r\n						<div layout="row" layout-align="start center" layout-wrap flex>\r\n							<div flex="10" layout layout-align="center center">\r\n								<span class="md-body-1">R</span>\r\n							</div>\r\n							<md-slider flex="65" min="0" max="255" ng-model="color._r" aria-label="red" class="red-slider"></md-slider>\r\n							<span flex></span>\r\n							<div flex="20" layout layout-align="center center">\r\n								<input style="width: 100%;" type="number" ng-model="color._r" aria-label="red" aria-controls="red-slider">\r\n							</div>\r\n						</div>\r\n						<div layout="row" layout-align="start center" layout-wrap flex>\r\n							<div flex="10" layout layout-align="center center">\r\n								<span class="md-body-1">G</span>\r\n							</div>\r\n							<md-slider flex="65" min="0" max="255" ng-model="color._g" aria-label="green" class="green-slider"></md-slider>\r\n							<span flex></span>\r\n							<div flex="20" layout layout-align="center center">\r\n								<input style="width: 100%;" type="number" ng-model="color._g" aria-label="green" aria-controls="green-slider">\r\n							</div>\r\n						</div>\r\n						<div layout="row" layout-align="start center" layout-wrap  flex>\r\n							<div flex="10" layout layout-align="center center">\r\n								<span class="md-body-1">B</span>\r\n							</div>\r\n							<md-slider flex="65" min="0" max="255" ng-model="color._b" aria-label="blue" class="blue-slider"></md-slider>\r\n							<span flex></span>\r\n							<div flex="20" layout layout-align="center center" >\r\n								<input style="width: 100%;" type="number" ng-model="color._b" aria-label="blue" aria-controls="blue-slider">\r\n							</div>\r\n						</div>\r\n						<div layout="row" layout-align="start center" layout-wrap  flex>\r\n							<div flex="10" layout layout-align="center center">\r\n								<span class="md-body-1">A</span>\r\n							</div>\r\n							<md-slider flex="65" min="0" max="1" step=".01" ng-model="alpha" aria-label="alpha" class="md-primary"></md-slider>\r\n							<span flex></span>\r\n							<div flex="20" layout layout-align="center center" >\r\n								<input style="width: 100%;" type="number" ng-model="alpha" aria-label="alpha" aria-controls="blue-slider">\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</md-tab-body>\r\n			</md-tab>\r\n			<md-tab>\r\n				<md-tab-label>\r\n					<md-icon>view_comfy</md-icon>\r\n				</md-tab-label>\r\n				<md-tab-body>\r\n					<div layout="column" layout-align="space-between start center" flex>\r\n						<div ng-repeat="row in palette track by $index" flex="15"  layout-align="space-between" layout="row">\r\n							<div ng-repeat="col in row track by $index" flex="10" style="height: 25.5px;" ng-style="{\'background\': col};" ng-click="setPaletteColor($event)"></div>\r\n						</div>\r\n					</div>\r\n				</md-tab-body>\r\n			</md-tab>\r\n			<md-tab>\r\n				<md-tab-label>\r\n					<md-icon>history</md-icon>\r\n				</md-tab-label>\r\n				<md-tab-body layout="row" layout-fill>\r\n					<div layout="column" flex layout-align="space-between start" layout-wrap layout-fill class="md-color-picker-history">\r\n						<div layout="row" flex="80" layout-align="space-between start start" layout-wrap  layout-fill>\r\n							<div flex="10" ng-repeat="historyColor in history.get() track by $index">\r\n								<div  ng-style="{\'background\': historyColor.toRgbString()}" ng-click="setPaletteColor($event)"></div>\r\n							</div>\r\n						</div>\r\n\r\n\r\n						<md-button flex-end ng-click="history.reset()" class="md-mini">\r\n							<md-icon>delete</md-icon>\r\n							Clear history\r\n						</md-button>\r\n					</div>\r\n				</md-tab-body>\r\n			</md-tab>\r\n		</md-tabs>\r\n	</div>\r\n</div>\r\n')}])}(angular,window,tinycolor);